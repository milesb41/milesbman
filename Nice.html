<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unauthorized Data Stream Initiated</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the hacker aesthetic */
        body {
            font-family: 'VT323', monospace;
            background-color: #0d1117;
            color: #00ff41; /* Neon Green */
            text-shadow: 0 0 5px #00ff41;
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><text x="0" y="14" font-size="16" fill="%2300ff41" stroke="%2300ff41" stroke-width="0.2">></text></svg>'), auto;
        }
        .container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .terminal-box {
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ff41;
            box-shadow: 0 0 20px rgba(0, 255, 65, 0.5);
            padding: 2rem;
            max-width: 90vw;
            width: 700px;
            overflow: hidden;
        }
        .log-line {
            line-height: 1.2;
            white-space: pre-wrap;
            opacity: 0.8;
        }
        .error {
            color: #ff004c;
            text-shadow: 0 0 5px #ff004c;
        }
        /* Custom progress bar animation */
        @keyframes progress-fill {
            from { width: 0%; }
            to { width: 100%; }
        }
    </style>
</head>
<body>
    <!-- Firebase Global Variables Setup (Mandatory for all Immersives) -->
    <script>
        const __app_id = 'mock-app-id';
        const __firebase_config = '{}';
        const __initial_auth_token = undefined;
    </script>

    <div class="container p-4">
        <div id="terminal" class="terminal-box rounded-lg">
            <div class="text-xl font-bold mb-4 border-b border-gray-700 pb-2">
                &gt; Gemini_Net_Scanner v1.3.3.7 initialized
            </div>

            <!-- Log area where messages will be displayed -->
            <div id="log" class="h-64 overflow-y-scroll mb-4 text-sm" style="scrollbar-color: #00ff41 black;">
                <div class="log-line">[$] Awaiting Target Input...</div>
                <div class="log-line">[$] Connecting to secure API endpoint...</div>
            </div>

            <!-- Progress Bar -->
            <div id="progress-container" class="mb-4 hidden">
                <div class="text-sm mb-1">DATA ACQUISITION STATUS: <span id="progress-text">0%</span></div>
                <div class="w-full bg-gray-800 rounded-full h-3">
                    <div id="progress-bar" class="h-3 rounded-full bg-gradient-to-r from-green-500 to-lime-400" style="width: 0;"></div>
                </div>
            </div>

            <!-- Final Reveal Message -->
            <div id="result" class="text-2xl font-bold text-center p-6 bg-green-900/50 rounded-md hidden">
                <!-- Content injected here by JS -->
            </div>
        </div>
    </div>

    <script>
        // Log levels for visual flair
        const LOG_LEVELS = {
            INFO: '[$]',
            WARN: '[!]',
            SUCCESS: '[+]',
            ERROR: '[X]',
        };

        const logElement = document.getElementById('log');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const resultElement = document.getElementById('result');

        // Function to append a log message with a simulated delay
        const appendLog = (level, message, delay = 100) => {
            return new Promise(resolve => {
                setTimeout(() => {
                    const line = document.createElement('div');
                    line.className = 'log-line';
                    line.innerHTML = `<span class="${level === LOG_LEVELS.ERROR ? 'error' : ''}">${level}</span> ${message}`;
                    logElement.appendChild(line);
                    logElement.scrollTop = logElement.scrollHeight;
                    resolve();
                }, delay);
            });
        };

        // Function to update progress bar smoothly
        const updateProgress = (target, duration = 1000) => {
            return new Promise(resolve => {
                const currentWidth = parseFloat(progressBar.style.width) || 0;
                const difference = target - currentWidth;
                const steps = 30; // 30 frames per second over the duration
                let step = 0;

                const interval = setInterval(() => {
                    step++;
                    const newWidth = currentWidth + (difference * step / steps);

                    if (step >= steps) {
                        clearInterval(interval);
                        progressBar.style.width = target + '%';
                        progressText.textContent = target + '%';
                        resolve();
                    } else {
                        progressBar.style.width = newWidth + '%';
                        progressText.textContent = Math.round(newWidth) + '%';
                    }
                }, duration / steps);
            });
        };

        // Main simulation function
        const runSimulation = async () => {
            const sessionId = crypto.randomUUID().toUpperCase().substring(0, 12);
            await appendLog(LOG_LEVELS.INFO, `Targeting Session ID: ${sessionId}...`, 500);

            let ipAddress = '127.0.0.1 (Localhost)';
            try {
                // Fetch public IP using a safe, public API
                await appendLog(LOG_LEVELS.INFO, 'Fetching public network address via ipify.org...', 800);
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                ipAddress = data.ip;
                await appendLog(LOG_LEVELS.SUCCESS, `Target IP Acquired: ${ipAddress} (Public)`, 1500);
            } catch (e) {
                await appendLog(LOG_LEVELS.ERROR, 'Public IP lookup failed. Defaulting to local address.', 1500);
            }

            await appendLog(LOG_LEVELS.INFO, 'Initializing simulated transfer protocol...', 1000);
            
            // Phase 1: Preparation (0% -> 30%)
            progressContainer.classList.remove('hidden');
            await appendLog(LOG_LEVELS.INFO, 'Scanning network ports [80, 443, 22, 21]...', 500);
            await updateProgress(30, 2000);
            await appendLog(LOG_LEVELS.SUCCESS, 'Ports accessible. Connection secured.', 500);

            // Phase 2: Transmission (30% -> 90%)
            await appendLog(LOG_LEVELS.WARN, 'Sending dummy packets to bypass WAF...', 800);
            await appendLog(LOG_LEVELS.INFO, 'Commencing high-volume data stream...', 50);
            await appendLog(LOG_LEVELS.INFO, 'Payload size: 1.44MB (Simulated)', 50);
            await updateProgress(65, 3000);

            // Flicker effect
            await appendLog(LOG_LEVELS.ERROR, '!!! DATA STREAM INTERRUPTED !!!', 100);
            await appendLog(LOG_LEVELS.WARN, 'Attempting re-transmission...', 300);

            await updateProgress(90, 1500);
            await appendLog(LOG_LEVELS.SUCCESS, 'Transfer integrity verified. Finalizing packet.', 500);

            // Phase 3: Finalization (90% -> 100%)
            await updateProgress(100, 1000);

            await appendLog(LOG_LEVELS.SUCCESS, `ACQUISITION COMPLETE. Processing 100% of data from ${ipAddress}...`, 2000);
            
            // Reveal the harmless message
            await appendLog(LOG_LEVELS.SUCCESS, 'Opening captured data packet...', 3000);
            logElement.classList.add('hidden');
            progressContainer.classList.add('hidden');

            resultElement.innerHTML = `
                <div class="text-3xl text-white mb-4">
                    [ ACCESS GRANTED ]
                </div>
                <div class="text-lg text-lime-400">
                    Target IP: <span class="text-white">${ipAddress}</span>
                </div>
                <div class="text-lg text-lime-400 mb-6">
                    Data Payload Content: <span class="text-white">"You've been Rick-Rolled."</span>
                </div>
                <div class="text-xl text-yellow-300">
                    *** CLASSIFIED: THIS WAS A FUN, HARMLESS JOKE. NO DATA WAS STOLEN. ***
                </div>
            `;
            resultElement.classList.remove('hidden');
        };

        // Start the simulation when the page loads
        window.onload = runSimulation;

    </script>
</body>
</html>
